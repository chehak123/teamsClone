{"version":3,"file":"give-me-an-avatar.js","sources":["../src/models.ts","../src/constants.ts","../src/utility.ts","../src/give-me-an-avatar.ts"],"sourcesContent":["export interface AvatarSettings {\r\n    /**\r\n     * Some avatars display user initials or even the full name and if this setting isn't supplied, \r\n     * the program randomly decides a user initial. Feel free to supply a value if you need to \r\n     * override this value. \r\n     */\r\n    Name?: string;\r\n    /**\r\n     * If this setting isn't supplied, the program will randomly decide an avatar size of the aspect \r\n     * ratio 1:1, i.e., a square avatar. If you'd like your avatar size to be of a particular size, \r\n     * supply a number to this setting. \r\n     */\r\n    Size?: number;\r\n}\r\n\r\nexport interface PrivateAvatarSettings extends AvatarSettings {\r\n    ExtraFilter?: string;\r\n}\r\n\r\nexport interface AvatarService {\r\n    Key: string;\r\n    URL: string;\r\n}\r\n\r\nexport enum AvatarExtraFilters {\r\n    KEY = 0,\r\n    FILTERS = 1 \r\n}\r\n","export const avatarCollection: [string, string][] = [\r\n    [\"via.placeholder.com\", \"https://via.placeholder.com/${this.Size}?text=${this.Name}\"], \r\n    [\"placeimg.com\", \"https://placeimg.com/${this.Size}/${this.Size}/people\"],\r\n    [\"placekitten.com\", \"https://placekitten.com/g/${this.Size}/${this.Size}\"],\r\n    [\"dummyimage.com\", \"https://dummyimage.com/${this.Size}x${this.Size}&text=${this.Name}\"],\r\n    [\"loremflickr.com\", \"https://loremflickr.com/${this.Size}/${this.Size}/human\"],\r\n    [\"baconmockup.com\", \"https://baconmockup.com/${this.Size}/${this.Size}/\"],\r\n    [\"placebeard.it\", \"https://placebeard.it/128\"],\r\n    [\"fakeimg.pl\", \"https://fakeimg.pl/${this.Size}x${this.Size}/?text=${this.Name}&font=bebas\"],\r\n    [\"thispersondoesnotexist.com\", \"https://thispersondoesnotexist.com/image\"],\r\n    [\"picsum.photos\", \"https://picsum.photos/${this.Size}\"],\r\n    [\"fillmurray.com\", \"https://www.fillmurray.com/${this.Size}/${this.Size}\"],\r\n    [\"placecage.com\", \"https://www.placecage.com/${this.Size}/${this.Size}\"],\r\n    [\"stevensegallery.com\", \"https://www.stevensegallery.com/${this.Size}/${this.Size}\"],\r\n    [\"gravatar.com\", \"https://www.gravatar.com/avatar/default?s=${this.Size}\"],\r\n    [\"ui-avatars.com\", \"https://ui-avatars.com/api/?background=random&size=${this.Size}&name=${this.Name}\"],\r\n    [\"generative-placeholders.glitch.me\", \"https://generative-placeholders.glitch.me/image?width=${this.Size}&height=${this.Size}\"],\r\n    [\"robohash.org\", \"https://robohash.org/${this.Name}?size=${this.Size}x${this.Size}${this.ExtraFilter}\"],  \r\n    [\"avatars.dicebear.com\", \"https://avatars.dicebear.com/api${this.ExtraFilter}/${this.Name}.svg?w=${this.Size}&h=${this.Size}\"],  \r\n    [\"avatar.uimaterial.com\", \"https://avatar.uimaterial.com/?name=${this.Name}&size=${this.Size}${this.ExtraFilter}\"]  \r\n];\r\n\r\nexport const avatarExtraFilters: [string, string][] = [\r\n    [\"robohash.org\", \"&set=set1\"], \r\n    [\"robohash.org\", \"&set=set2\"], \r\n    [\"robohash.org\", \"&set=set3\"], \r\n    [\"robohash.org\", \"&set=set4\"], \r\n    [\"avatars.dicebear.com\", \"/gridy\"], \r\n    [\"avatars.dicebear.com\", \"/human\"], \r\n    [\"avatars.dicebear.com\", \"/identicon\"], \r\n    [\"avatars.dicebear.com\", \"/jdenticon\"], \r\n    [\"avatars.dicebear.com\", \"/avataaars\"], \r\n    [\"avatars.dicebear.com\", \"/bottts\"], \r\n    [\"avatar.uimaterial.com\", \"&setId=8Pfmys5bgfL2NbXFG2sU\"],\r\n    [\"avatar.uimaterial.com\", \"&setId=0496UVJDTqyd2eCIAa46\"],\r\n    [\"avatar.uimaterial.com\", \"&setId=SM2u3518GjohwtHQXNK0\"],\r\n    [\"avatar.uimaterial.com\", \"&setId=Pb7ErSM37KjjIZyJk8w6\"] \r\n];\r\n\r\nexport const alphabets: string[] = [ \"A\", \"B\", \"C\", \"D\", \"E\", \"F\", \"G\", \"H\", \"I\", \"J\", \"K\", \"L\", \r\n    \"M\", \"N\", \"O\", \"P\", \"Q\", \"R\", \"S\", \"T\", \"U\", \"V\", \"W\", \"X\", \"Y\", \"Z\" ]; \r\n\r\nexport enum avatarSizeRange {\r\n    Min = 96,\r\n    Max = 513\r\n}","import { AvatarService, AvatarExtraFilters, PrivateAvatarSettings } from \"./models\";\r\nimport { alphabets, avatarSizeRange, avatarExtraFilters } from \"./constants\";\r\n\r\nexport class Utility { \r\n\r\n    public getDefaultName(): string {\r\n        const firstName = alphabets[Math.floor(Math.random() * alphabets.length)];\r\n        const lastName = alphabets[Math.floor(Math.random() * alphabets.length)];\r\n        return `${firstName}%20${lastName}`;\r\n    }\r\n    \r\n    public getDefaultSize(): number {\r\n        return Math.floor(Math.random() * (avatarSizeRange.Max - avatarSizeRange.Min + 1)) + avatarSizeRange.Min;\r\n    }   \r\n\r\n    public getDefaultSettings(): PrivateAvatarSettings {\r\n        return {\r\n            Name: this.getDefaultName(),\r\n            Size: this.getDefaultSize(),\r\n            ExtraFilter: \"\"\r\n        };\r\n    }\r\n\r\n    public getRandomAvatarService(avatars: [string, string][]): AvatarService {\r\n        const [key, url] = avatars[Math.floor(Math.random() * avatars.length)];\r\n        return {\r\n            Key: key,\r\n            URL: url\r\n        };\r\n    }\r\n\r\n    public processAvatarTemplate(templateString: string, templateVars: PrivateAvatarSettings): string {\r\n        return new Function(\"return `\"+templateString +\"`;\").call(templateVars);\r\n    }\r\n\r\n    public validateAndCleanSettings(settings: PrivateAvatarSettings, avatarServiceKey: string): PrivateAvatarSettings { \r\n        if(settings.Name) {\r\n            settings.Name = settings.Name.replace(/ /gi, \"%20\");\r\n        }\r\n        if(!settings.Name) {\r\n            settings.Name = this.getDefaultName();\r\n        }\r\n        if(!settings.Size) { \r\n            settings.Size = this.getDefaultSize();\r\n        }\r\n        if(!settings.ExtraFilter) { \r\n            settings.ExtraFilter = this.applyExtraFiltersToAvatarURL(avatarServiceKey);\r\n        }\r\n        return settings;\r\n    }\r\n\r\n    public applyExtraFiltersToAvatarURL(avatarServiceKey: string): string {\r\n        const extraFilters = avatarExtraFilters.filter((element): boolean => \r\n            element[AvatarExtraFilters.KEY] === avatarServiceKey);\r\n\r\n        if(extraFilters === undefined || extraFilters.length == 0){\r\n            return \"\";\r\n        }\r\n\r\n        return extraFilters[Math.floor(Math.random() * extraFilters.length)][AvatarExtraFilters.FILTERS]; \r\n    }\r\n}\r\n\r\n","import { AvatarSettings } from \"./models\";\r\nimport { Utility } from \"./utility\";\r\nimport { avatarCollection } from \"./constants\";\r\n \r\nexport { AvatarSettings } from \"./models\";\r\n\r\n/**\r\n * Returns the URL of an avatar that is picked at random.\r\n * @param {AvatarSettings} settings - You can supply settings to customize the avatar a bit.\r\n */\r\nexport function giveMeAnAvatar(settings: AvatarSettings): string {\r\n    const util = new Utility();\r\n\r\n    if (!settings) {\r\n        settings = util.getDefaultSettings();\r\n    } \r\n\r\n    const avatarService = util.getRandomAvatarService(avatarCollection);\r\n    settings = util.validateAndCleanSettings(settings, avatarService.Key);\r\n    return util.processAvatarTemplate(avatarService.URL, settings); \r\n}"],"names":["AvatarExtraFilters","avatarSizeRange","avatarCollection","avatarExtraFilters","alphabets","Utility","getDefaultName","Math","floor","random","length","getDefaultSize","Max","Min","getDefaultSettings","Name","this","Size","ExtraFilter","getRandomAvatarService","avatars","Key","URL","processAvatarTemplate","templateString","templateVars","Function","call","validateAndCleanSettings","settings","avatarServiceKey","replace","applyExtraFiltersToAvatarURL","extraFilters","filter","element","KEY","undefined","FILTERS","util","avatarService"],"mappings":"IAwBYA,GAAZ,SAAYA,GACRA,iBACAA,yBAFJ,CAAYA,IAAAA,WCkBAC,EA1CCC,EAAuC,CAChD,CAAC,sBAAuB,8DACxB,CAAC,eAAgB,yDACjB,CAAC,kBAAmB,uDACpB,CAAC,iBAAkB,sEACnB,CAAC,kBAAmB,2DACpB,CAAC,kBAAmB,sDACpB,CAAC,gBAAiB,6BAClB,CAAC,aAAc,8EACf,CAAC,6BAA8B,4CAC/B,CAAC,gBAAiB,sCAClB,CAAC,iBAAkB,wDACnB,CAAC,gBAAiB,uDAClB,CAAC,sBAAuB,6DACxB,CAAC,eAAgB,0DACjB,CAAC,iBAAkB,qFACnB,CAAC,oCAAqC,0FACtC,CAAC,eAAgB,uFACjB,CAAC,uBAAwB,sGACzB,CAAC,wBAAyB,0FAGjBC,EAAyC,CAClD,CAAC,eAAgB,aACjB,CAAC,eAAgB,aACjB,CAAC,eAAgB,aACjB,CAAC,eAAgB,aACjB,CAAC,uBAAwB,UACzB,CAAC,uBAAwB,UACzB,CAAC,uBAAwB,cACzB,CAAC,uBAAwB,cACzB,CAAC,uBAAwB,cACzB,CAAC,uBAAwB,WACzB,CAAC,wBAAyB,+BAC1B,CAAC,wBAAyB,+BAC1B,CAAC,wBAAyB,+BAC1B,CAAC,wBAAyB,gCAGjBC,EAAsB,CAAE,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IACxF,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MAErE,SAAYH,GACRA,kBACAA,mBAFJ,CAAYA,IAAAA,WCvCCI,sDAEFC,eAAA,WAGH,OAFkBF,EAAUG,KAAKC,MAAMD,KAAKE,SAAWL,EAAUM,eAChDN,EAAUG,KAAKC,MAAMD,KAAKE,SAAWL,EAAUM,YAI7DC,eAAA,WACH,OAAOJ,KAAKC,MAAMD,KAAKE,UAAYR,EAAgBW,IAAMX,EAAgBY,IAAM,IAAMZ,EAAgBY,OAGlGC,mBAAA,WACH,MAAO,CACHC,KAAMC,KAAKV,iBACXW,KAAMD,KAAKL,iBACXO,YAAa,OAIdC,uBAAA,SAAuBC,SACPA,EAAQb,KAAKC,MAAMD,KAAKE,SAAWW,EAAQV,SAC9D,MAAO,CACHW,SACAC,aAIDC,sBAAA,SAAsBC,EAAwBC,GACjD,WAAWC,SAAS,WAAWF,EAAgB,MAAMG,KAAKF,MAGvDG,yBAAA,SAAyBC,EAAiCC,GAa7D,OAZGD,EAASd,OACRc,EAASd,KAAOc,EAASd,KAAKgB,QAAQ,MAAO,QAE7CF,EAASd,OACTc,EAASd,KAAOC,KAAKV,kBAErBuB,EAASZ,OACTY,EAASZ,KAAOD,KAAKL,kBAErBkB,EAASX,cACTW,EAASX,YAAcF,KAAKgB,6BAA6BF,IAEtDD,KAGJG,6BAAA,SAA6BF,GAChC,IAAMG,EAAe9B,EAAmB+B,OAAO,SAACC,UAC5CA,EAAQnC,EAAmBoC,OAASN,IAExC,YAAoBO,IAAjBJ,GAAqD,GAAvBA,EAAavB,OACnC,GAGJuB,EAAa1B,KAAKC,MAAMD,KAAKE,SAAWwB,EAAavB,SAASV,EAAmBsC,+CCjDjET,GAC3B,IAAMU,EAAO,IAAIlC,EAEZwB,IACDA,EAAWU,EAAKzB,sBAGpB,IAAM0B,EAAgBD,EAAKpB,uBAAuBjB,GAElD,OADA2B,EAAWU,EAAKX,yBAAyBC,EAAUW,EAAcnB,KAC1DkB,EAAKhB,sBAAsBiB,EAAclB,IAAKO"}